{% extends 'base.html' %}
{% load humanize %}

{% block content %}

<h3>{{ tournament.name }}</h3>
<hr/>

{% regroup formset.forms by instance.match.when as form_list %}

<form method="POST" action="">
    {% csrf_token %}
    {{ formset.management_form }}

    {% for group in form_list %}

    <div class="panel panel-default">
        <div class="panel-heading">
            <h6 class="panel-title">
            <small>{{ group.grouper|date:"l d F f" }} |
                   DEADLINE: {{ group.list.0.instance.match.deadline|naturaltime }}</small></h6>
        </div>

    {% for form in group.list %}
        {{ form.id }}
        {{ form.match }}

        <div class="panel-body">
            <div class="row">
                <div class="col-md-12 text-center">
                    <div class="progress">
                        <div class="progress-bar progress-bar-success progress-local" style="width: 35%">
                        Local 35%
                        </div>
                        <div class="progress-bar progress-bar-danger progress-tie" style="width: 20%">
                        Empate 20%
                        </div>
                        <div class="progress-bar progress-bar-info progress-away" style="width: 45%">
                        Visitante 45%
                        </div>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-4">
                    <div class="panel panel-success">
                        <div class="panel-heading">
                            <h6 class="panel-title">
                            <strong>{{ form.instance.match.home }}</strong>
                            <img class="team-image-small pull-right" src="{{ form.instance.match.home.image.url }}" /></h6>
                        </div>
                        <div class="panel-body text-left">
                            <small><strong>1ero</strong> | 1 ganado, 2 empates, 0 perdidos<br/>
                            <strong>Últimos resultados:</strong> 3 - 1 (River) | 1 - 2 (Vélez)</small>
                        </div>
                    </div>
                </div>
                <div class="col-md-2 text-center">
                    <p style="padding-bottom: 10px">{{ form.home_goals }}</p>
                </div>
                <div class="col-md-2 text-center">
                    <p style="padding-bottom: 10px">{{ form.away_goals }}</p>
                </div>
                <div class="col-md-4">
                    <div class="panel panel-info">
                        <div class="panel-heading">
                            <h6 class="panel-title text-right hidden-xs">
                            <strong>{{ form.instance.match.away }}</strong>
                            <img class="team-image-small pull-left" src="{{ form.instance.match.away.image.url }}" /></h6>
                            <h6 class="panel-title text-left visible-xs">
                            <strong>{{ form.instance.match.away }}</strong>
                            <img class="team-image-small pull-right" src="{{ form.instance.match.away.image.url }}" /></h6>
                        </div>
                        <div class="panel-body text-right hidden-xs">
                            <small><strong>1ero</strong> | 1 ganado, 2 empates, 0 perdidos<br/>
                            <strong>Últimos resultados:</strong> 3 - 1 (River) | 1 - 2 (Vélez)</small>
                        </div>
                        <div class="panel-body text-left visible-xs">
                            <small><strong>1ero</strong> | 1 ganado, 2 empates, 0 perdidos<br/>
                            <strong>Últimos resultados:</strong> 3 - 1 (River) | 1 - 2 (Vélez)</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    {% endfor %}
    </div>
    {% endfor %}

    <div class="row">
        <div class="col-xs-4 col-xs-offset-4 text-center">
            <button name="save" type="submit" class="btn btn-lg btn-block btn-primary">Guardar</button>
            <button name="back" type="submit" class="btn btn-lg btn-block btn-default">Volver</button>
        </div>
    </div>

</form>

{% endblock %}
